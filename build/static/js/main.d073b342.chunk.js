(this["webpackJsonpdevangel-react"]=this["webpackJsonpdevangel-react"]||[]).push([[0],{269:function(e,t,a){e.exports=a(487)},274:function(e,t,a){},485:function(e,t,a){},487:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),i=(a(274),a(170)),s=a(21),l=a(50),u=Object(l.a)(),d=a(28),p=a(29),m=a(31),h=a(30),g=a(495),f=a(39),v=a(100),b=a(34),E=a(25),y=a.n(E),O=a(41),w=a(65),j=a(69),k=a.n(j),C=a(70),P=a.n(C),I="http://devangel-app.eba-zsmfbgud.us-west-2.elasticbeanstalk.com",x=k.a.create();x.interceptors.request.use((function(e){var t=P.a.get("jwt_access_token");return null!=t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),x.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;if(401!==e.response.status||t._retry)return Promise.reject(e);t._retry=!0;var a=P.a.get("jwt_access_token");return k.a.post(I+"/api/users/refresh",{},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){if(console.log("res: ",e),200===e.status){var a=e.data.access_token;return P.a.set("jwt_access_token",a,{path:"/"}),x.defaults.headers.Authorization="Bearer ".concat(a),x(t)}})).catch((function(e){return P.a.remove("jwt_access_token"),console.log("err: ",e),Promise.reject(e)}))}));var L=x,_=Object(w.b)({name:"users",initialState:{loading:!1,loggedIn:!1,userDetails:null,loginRequiredModalOpen:!1,loginModalOpen:!1,registerModalOpen:!1,loginError:!1,duplicateUsernameError:!1,duplicateEmailError:!1,registerError:!1},reducers:{userLoading:function(e,t){e.loading=!0,e.loginError=!1,e.registerError=!1,e.duplicateEmailError=!1,e.duplicateUsernameError=!1},userLogin:function(e,t){e.userDetails=t.payload.user_details,e.loading=!1,e.loggedIn=!0,e.loginModalOpen=!1,e.registerModalOpen=!1,e.loginRequiredModalOpen=!1},userLogout:function(e,t){e.userDetails=null,e.loggedIn=!1},showLoginRequiredModal:function(e,t){e.loginRequiredModalOpen=t.payload},showLoginModal:function(e,t){e.loginModalOpen=t.payload},showRegisterModal:function(e,t){e.registerModalOpen=t.payload},setLoginError:function(e,t){e.loginError=t.payload},setRegisterError:function(e,t){e.registerError=t.payload.error,-1!==t.payload.message.indexOf("DuplicateUsernameError")&&(e.duplicateUsernameError=!0),-1!==t.payload.message.indexOf("DuplicateEmailError")&&(e.duplicateEmailError=!0)}}}),M=_.actions,R=M.userLoading,F=M.userLogin,S=M.userLogout,N=M.showLoginRequiredModal,U=M.showLoginModal,D=M.showRegisterModal,T=M.setLoginError,A=M.setRegisterError,q=_.reducer,B=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={drawerOpen:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"navbar-top"},r.a.createElement(g.a,{title:"DevAngel",placement:"left",closable:!0,onClose:function(){return e.setState({drawerOpen:!1})},visible:this.state.drawerOpen,className:"navDrawer"},r.a.createElement("div",{id:"drawerLinksContainer"},r.a.createElement("a",{target:"_blank",href:"https://docs.google.com/forms/d/e/1FAIpQLSe2Xf_laNJ54lJ1ALUk1gbq2eUYFhPYEVeWgYVtOyRnNbHPmw/viewform"},"Connect with Startups"),r.a.createElement("a",{target:"_blank",href:"https://docs.google.com/forms/d/e/1FAIpQLScIVPmDp3hWkg9d8CW2fw9zQ8Sr8cVE4yQdxh0RhgMPsa5IQw/viewform"},"Connect with Investors"),r.a.createElement(v.b,{to:"/products",onClick:function(){return e.setState({drawerOpen:!1})}},"Crypto Hunt")),r.a.createElement("div",{id:"drawerUserContainer"},!this.props.user.loggedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{onClick:function(){return e.props.showLoginModal(!0)}},"Sign In"),r.a.createElement(f.a,{onClick:function(){return e.props.showRegisterModal(!0)}},"Sign Up")),this.props.user.loggedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{onClick:function(){e.setState({drawerOpen:!1}),e.props.logoutUser()}},"Logout")))),r.a.createElement("div",{id:"navbar-body"},r.a.createElement("div",{id:"navLeftContainer"},r.a.createElement("div",{id:"logoContainer"},r.a.createElement("div",{id:"hamburger"},r.a.createElement(f.a,{onClick:function(){return e.setState({drawerOpen:!0})}},r.a.createElement("svg",{viewBox:"0 0 100 80",width:"20",height:"20"},r.a.createElement("rect",{width:"100",height:"10",rx:"8"}),r.a.createElement("rect",{y:"30",width:"100",height:"10",rx:"8"}),r.a.createElement("rect",{y:"60",width:"100",height:"10",rx:"8"})))),r.a.createElement(v.a,{to:"/"},r.a.createElement("h3",null,"DevAngel"))),r.a.createElement("div",{id:"navLeftLinks"},r.a.createElement("a",{target:"_blank",href:"https://docs.google.com/forms/d/e/1FAIpQLSe2Xf_laNJ54lJ1ALUk1gbq2eUYFhPYEVeWgYVtOyRnNbHPmw/viewform"},"Connect with Startups"),r.a.createElement("a",{target:"_blank",href:"https://docs.google.com/forms/d/e/1FAIpQLScIVPmDp3hWkg9d8CW2fw9zQ8Sr8cVE4yQdxh0RhgMPsa5IQw/viewform"},"Connect with Investors"),r.a.createElement(v.b,{to:"/products"},"Crypto Hunt"))),r.a.createElement("div",{id:"navRightContainer"},r.a.createElement("div",{id:"navRightLinks"},!this.props.user.loggedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{onClick:function(){return e.props.showLoginModal(!0)}},"Sign In"),r.a.createElement(f.a,{onClick:function(){return e.props.showRegisterModal(!0)}},"Sign Up")),this.props.user.loggedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{onClick:function(){return e.props.logoutUser()}},"Logout"))))))}}]),a}(r.a.Component),z=Object(b.b)((function(e){return{user:e.user}}),{logoutUser:function(){return function(){var e=Object(O.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P.a.remove("jwt_access_token",{path:"/"}),t(S());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},showLoginModal:U,showRegisterModal:D})(Object(s.f)(B)),K=a(491),V=a(497),H=a(489),W=Object(w.b)({name:"grants",initialState:{loading:!1,grants:[],totalGrantsCount:0,categories:[]},reducers:{grantsLoading:function(e,t){e.loading=!0},grantsReceived:function(e,t){e.grants=t.payload.grants,e.categories=t.payload.categories,e.loading=!1,e.totalGrantsCount=t.payload.total_grants}}}),G=W.actions,Q=G.grantsLoading,Y=G.grantsReceived,J=W.reducer,X=K.a.TabPane,$=[{title:"Title",dataIndex:"title",key:"title"},{title:"Type",dataIndex:"category",key:"category",render:function(e){return e.name}},{title:"Highlight",dataIndex:"highlight",key:"highlight",className:"grantsHighlightsColumn"},{title:"Deadline",dataIndex:"deadline",key:"deadline",className:"grantsDeadlineColumn",render:function(e){return e||"Ongoing"}},{title:"Funds",dataIndex:"funds",key:"funds",render:function(e){return e||"Undisclosed"}},{title:"Focus Area",dataIndex:"tags",key:"focus_area",className:"grantsFocusAreaColumn",render:function(e){return r.a.createElement("span",null,e.map((function(e){return r.a.createElement(V.a,{color:"blue",key:e.id},e.text)})))}},{title:"Apply",dataIndex:"application_link",key:"application_link",render:function(e){return r.a.createElement(f.a,{type:"primary",href:e,target:"_blank"},"Apply")}}],Z=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchGrants()}},{key:"render",value:function(){var e=this,t=this.props.grants,a=t.loading,n=t.grants,o=t.categories,c={total:t.totalGrantsCount,showSizeChanger:!1,pageSize:2},i={};return o.map((function(e){return i[e.name]=[]})),n.map((function(e){try{i[e.category.name].push(e)}catch(t){}})),r.a.createElement(K.a,{defaultActiveKey:"all",onChange:function(t,a){e.props.fetchGrants(null,t)},className:"grantsContainer"},r.a.createElement(X,{tab:"All",key:"all"},r.a.createElement(H.a,{columns:$,dataSource:n,loading:a,rowKey:"id",showSizeChanger:!1,pagination:c,onChange:this.props.fetchGrants})),o.map((function(t){return r.a.createElement(X,{tab:t.name,key:t.id},r.a.createElement(H.a,{columns:$,dataSource:i[t.name],loading:a,rowKey:"id",pagination:c,onChange:function(a){return e.props.fetchGrants(a,t.id)}}))})))}}]),a}(r.a.Component),ee=Object(b.b)((function(e){return{grants:e.grants}}),{fetchGrants:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";return function(){var a=Object(O.a)(y.a.mark((function a(n){var r,o;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=1,e&&e.current&&(r=e.current),n(Q()),a.next=5,k.a.get(I+"/api/grants?page=".concat(r,"&category=").concat(t));case 5:o=a.sent,n(Y(o.data));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(Z),te=a(492),ae=a(493),ne=a(494),re=a(496),oe=te.a.Text,ce=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onFinish=function(t){console.log("Success:",t);var a=t.email,n=t.password;e.props.loginUser(a,n)},e.onFinishFailed=function(e){console.log("Failed:",e)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(ae.a,{visible:this.props.user.loginModalOpen,onCancel:function(){return e.props.showLoginModal(!1)},footer:null},r.a.createElement("h2",null,"Sign In"),r.a.createElement(ne.a,{layout:"vertical",name:"basic",initialValues:{remember:!0},className:"loginForm",onFinish:this.onFinish,onFinishFailed:this.onFinishFailed},r.a.createElement(ne.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}]},r.a.createElement(re.a,{type:"email"})),r.a.createElement(ne.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(re.a.Password,null)),this.props.user.loginError&&r.a.createElement(oe,{type:"danger",className:"loginErrorText"},"Please check your email and/or password and try again."),r.a.createElement(ne.a.Item,null,r.a.createElement(f.a,{type:"primary",htmlType:"submit"},"Login"))))}}]),a}(r.a.Component),ie=Object(b.b)((function(e){return{user:e.user}}),{loginUser:function(e,t){return function(){var a=Object(O.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(R()),T(!1),a.prev=2,a.next=5,k.a.post(I+"/api/users/login",{email:e,password:t});case 5:r=a.sent,P.a.set("jwt_access_token",r.data.access_token,{path:"/"}),n(F(r.data)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),n(T(!0));case 13:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()},showLoginModal:U})(Object(s.f)(ce)),se=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onFinish=function(t){var a=t.username,n=t.email,r=t.password;e.props.registerUser(a,n,r),console.log("Success:",t)},e.onFinishFailed=function(e){console.log("Failed:",e)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=null,a=null;return this.props.user.duplicateUsernameError&&(t={validateStatus:"error",help:"This username is taken"}),this.props.user.duplicateEmailError&&(a={validateStatus:"error",help:"This email is taken"}),r.a.createElement(ae.a,{visible:this.props.user.registerModalOpen,onCancel:function(){return e.props.showRegisterModal(!1)},footer:null},r.a.createElement("h2",null,"Sign Up"),r.a.createElement(ne.a,{layout:"vertical",name:"basic",initialValues:{remember:!0},className:"loginForm",onFinish:this.onFinish,onFinishFailed:this.onFinishFailed},r.a.createElement(ne.a.Item,Object.assign({label:"Username",name:"username"},t,{rules:[{required:!0,message:"Please input your username!"}]}),r.a.createElement(re.a,null)),r.a.createElement(ne.a.Item,Object.assign({label:"Email",name:"email"},a,{rules:[{required:!0,message:"Please input your email!"}]}),r.a.createElement(re.a,{type:"email"})),r.a.createElement(ne.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(re.a.Password,null)),r.a.createElement(ne.a.Item,null,r.a.createElement(f.a,{type:"primary",htmlType:"submit"},"Sign Up"))))}}]),a}(r.a.Component),le=Object(b.b)((function(e){return{user:e.user}}),{registerUser:function(e,t,a){return function(){var n=Object(O.a)(y.a.mark((function n(r){var o;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(R()),n.prev=1,n.next=4,k.a.post(I+"/api/users/register",{username:e,email:t,password:a});case 4:o=n.sent,P.a.set("jwt_access_token",o.data.access_token,{path:"/"}),r(F(o.data)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.log("err: ",n.t0.response),r(A({error:!0,message:n.t0.response.data.error}));case 13:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()},showRegisterModal:D})(se),ue=a(153),de=(a(474),a(265)),pe=a(57),me=a(83),he=a(253),ge=Object(w.b)({name:"products",initialState:{loading:!1,initialLoadComplete:!1,products:[],categories:[],loadedProductIds:[],imageUploadResource:null,infiniteLoading:!1,currentPage:1,hasMoreProducts:!0,categoryFilter:"all",updatedAt:""},reducers:{productsLoading:function(e,t){e.loading=!0},productsInfiniteLoading:function(e,t){e.infiniteLoading=!0},productsReceived:function(e,t){var a=[],n=[];t.payload.products.map((function(t){e.loadedProductIds.indexOf(-1===t.id)&&(a.push(t),n.push(t.id))})),e.products=[].concat(Object(me.a)(e.products),a),e.loadedProductIds=[].concat(Object(me.a)(e.loadedProductIds),n),e.loading=!1,e.initialLoadComplete=!0,e.categories=t.payload.categories},addProducts:function(e,t){var a=[],n=[];t.payload.products.map((function(t){e.loadedProductIds.indexOf(-1===t.id)&&(a.push(t),n.push(t.id))})),e.products=[].concat(Object(me.a)(e.products),a),e.loadedProductIds=[].concat(Object(me.a)(e.loadedProductIds),n),e.loading=!1,e.infiniteLoading=!1,e.currentPage+=1,e.categories=t.payload.categories},addCommentToProduct:function(e,t){var a=e.products.find((function(e){return e.id===t.payload.comment.product_id}));a.comments=[t.payload.comment].concat(Object(me.a)(a.comments)),a.comments_count+=1},setImageUploadResource:function(e,t){e.imageUploadResource=t.payload},changeProductUpvotes:function(e,t){var a=e.products.find((function(e){return e.id===t.payload.productId}));a.has_upvoted?(a.upvotes_count-=1,a.has_upvoted=!1):(a.upvotes_count+=1,a.has_upvoted=!0)},endOfProductsList:function(e,t){e.hasMoreProducts=!1,e.infiniteLoading=!1,e.loading=!1},loadingError:function(e,t){e.infiniteLoading=!1,e.loading=!1},setProductCategoryFilter:function(e,t){e.categoryFilter=t.payload},updateProduct:function(e,t){var a=Object(pe.a)(Object(pe.a)({},t.payload.product),{},{related_products:t.payload.related_products});if(-1===e.loadedProductIds.indexOf(t.payload.product.id))e.loadedProductIds.push(t.payload.product.id),e.products.push(a);else{var n=e.products.findIndex((function(e){return e.id===t.payload.product.id})),r=Object(pe.a)(Object(pe.a)({},e.products[n]),a),o=Object(me.a)(e.products);o[n]=r,e.products=Object(me.a)(o)}e.updatedAt=t.payload.updatedAt}}}),fe=ge.actions,ve=fe.productsLoading,be=fe.productsReceived,Ee=fe.addCommentToProduct,ye=fe.setImageUploadResource,Oe=fe.changeProductUpvotes,we=fe.productsInfiniteLoading,je=fe.addProducts,ke=fe.endOfProductsList,Ce=fe.loadingError,Pe=fe.setProductCategoryFilter,Ie=fe.updateProduct,xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(){var t=Object(O.a)(y.a.mark((function t(a,n){var r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===n().products.products.length||1!==e){t.next=3;break}return t.abrupt("return");case 3:return a(ve()),e>1&&a(we()),t.prev=5,t.next=8,L.get(I+"/api/products?page=".concat(e));case 8:r=t.sent,a(e>1?je(r.data):be(r.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),404===t.t0.response.status?a(ke()):a(Ce());case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,a){return t.apply(this,arguments)}}()},Le=ge.reducer,_e=a(61),Me=a(257),Re=a(266),Fe=a(128),Se=a(129),Ne=Object(_e.a)([function(e){return e.products},function(e){return e.categoryFilter}],(function(e,t){if("all"===t)return e;var a=[];return e.map((function(e){console.log(e),-1!==e.categories.findIndex((function(e){return e.name===t}))&&a.push(e)})),a})),Ue=function(e){return Object(Me.a)(e)?"Today":Object(Re.a)(e)?"Yesterday":Object(Fe.a)(e,"MMMM do")},De=Object(_e.a)([Ne],(function(e){var t=new Map,a=null,n=null,r=[],o=[];if(e.map((function(e){return o.push(e)})),o.sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),o.map((function(e){var o=Object(pe.a)({},e),c=new Date(e.created_at);o.created_at=c,o.relativeDate=Object(Se.a)(c,{addSuffix:!0});var i=Object(Fe.a)(c,"MM/dd/yyyy");if(a||(a=i,n=c),i!==a){var s=Ue(n),l={dateKey:a,displayLabel:s,products:r};t.set(a,l),r=[],a=i,n=c}r.push(o)})),r.length>0){var c=Ue(n),i={dateKey:a,displayLabel:c,products:r};t.set(a,i)}return console.log("parsedProductsByDay: ",r),console.log("mappings: ",t),Array.from(t)})),Te=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:this.props.className||""},r.a.createElement("polygon",{points:"0,0 12,0 6,12"}))}}]),a}(r.a.Component),Ae=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",width:"14px",height:"14px",viewBox:"0 0 1280.000000 1217.000000",preserveAspectRatio:"xMidYMid meet"},r.a.createElement("g",{transform:"translate(0.000000,1217.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},r.a.createElement("path",{d:"M6069 12166 c-2 -2 -94 -9 -204 -15 -1108 -64 -2079 -312 -2985 -765 -1021 -510 -1827 -1237 -2323 -2096 -286 -496 -477 -1080 -527 -1615 -6 -66 -15 -153 -21 -193 -12 -93 -12 -263 0 -372 6 -47 15 -137 21 -200 118 -1187 817 -2319 1945 -3150 747 -551 1664 -948 2668 -1155 115 -24 211 -46 215 -49 3 -4 2 -14 -3 -22 -6 -8 -548 -514 -1205 -1125 -657 -610 -1203 -1124 -1213 -1142 -26 -46 -17 -102 22 -141 60 -59 72 -56 556 173 237 112 451 212 476 222 25 10 1024 477 2220 1039 1575 740 2188 1024 2224 1029 28 4 62 15 76 24 14 10 97 35 183 57 1620 411 2876 1232 3619 2365 553 845 793 1826 671 2753 -103 789 -448 1536 -1020 2207 -178 209 -502 517 -754 716 -1034 816 -2397 1319 -3855 1423 -121 9 -274 21 -340 26 -116 10 -437 14 -446 6z"})))}}]),a}(r.a.Component),qe=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_IMGIX_BASE_URL,Be=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onUpvoteClick=function(e){e.stopPropagation(),n.props.user.loggedIn||n.props.showLoginRequiredModal(!0),n.props.upvoteProduct(n.props.product.id)},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.product,a=t.name,n=t.highlight,o=t.id,c=t.upvotes_count,i=t.comments_count,s=t.categories,l=t.thumbnail_key,u=t.has_upvoted,d="https://firebasestorage.googleapis.com/v0/b/devangel-dev.appspot.com/o/download%20(14).png?alt=media&token=fa7aeea2-0ef7-4189-b32d-58d066b85174";return l&&(d="".concat(qe,"/").concat(l,"?w=80&h=80&fit=crop")),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"productItem",onClick:function(){return e.props.history.push("/products/".concat(o))}},r.a.createElement("div",{className:"productImage"},r.a.createElement("img",{src:d})),r.a.createElement("div",{className:"productDescriptionContainer"},r.a.createElement("h3",{className:"productTitle"},a),r.a.createElement("p",{className:"productDescriptionBody"},n),r.a.createElement("div",{className:"productCategories"},s.map((function(e){return r.a.createElement(V.a,{color:"blue",key:e.id},e.name)}))),r.a.createElement("div",{className:"productCommentsLine"},r.a.createElement("div",{className:"productCommentsBox"},r.a.createElement(Ae,null),r.a.createElement("span",null,i||0)))),r.a.createElement("div",{className:"productUpvoteContainer ".concat(u?"hasUpvoted":"")},r.a.createElement("button",{onClick:this.onUpvoteClick},r.a.createElement("span",{className:"productUpvoteButtonText"},r.a.createElement(Te,{className:"upvoteIcon"}),r.a.createElement("span",null,c))))))}}]),a}(r.a.Component),ze=Object(b.b)((function(e){return{user:e.user}}),{upvoteProduct:function(e){return function(){var t=Object(O.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.post(I+"/api/products/".concat(e,"/upvote"));case 3:t.sent,a(Oe({productId:e})),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},showLoginRequiredModal:N})(Object(s.f)(Be)),Ke=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleIntersection=function(t){t.isIntersecting&&e.props.loadMoreProducts()},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"render",value:function(){var e=this,t=this.props.products,a=(t.products,t.categories,t.loading),n=t.infiniteLoading,o=t.hasMoreProducts,c={onChange:this.handleIntersection};return r.a.createElement("div",null,r.a.createElement("h1",null,"Products"),r.a.createElement("div",{id:"productsFilterContainer"},r.a.createElement(ue.default.Group,{onChange:function(t){return e.props.setProductCategoryFilter(t.target.value)},defaultValue:"all"},r.a.createElement(ue.default,{value:"all"},"All Categories"),this.props.productCategories.map((function(e){return r.a.createElement(ue.default,{value:e.name,key:e.name},e.name)})))),this.props.processedProducts.map((function(e){return r.a.createElement("div",{className:"productListForDay",key:e[0]},r.a.createElement("h3",null,e[1].displayLabel),r.a.createElement("div",{className:"productItemsListForDay"},e[1].products.map((function(e){return r.a.createElement(ze,{product:e,key:e.id})}))))})),o&&!n&&!a&&r.a.createElement(de.a,Object.assign({},c,{threshold:[.75,1]}),r.a.createElement("div",{id:"productsInfiniteScrollContainer"})),n&&r.a.createElement("div",{id:"loadingProductsContainer"},r.a.createElement("h2",null,"-Loading-")),!o&&r.a.createElement("div",{id:"endOfProductsList"},r.a.createElement("h2",null,"-End Of List-")))}}]),a}(r.a.Component),Ve=Object(b.b)((function(e){return{products:e.products,processedProducts:De(e.products),productCategories:e.products.categories}}),{fetchProducts:xe,loadMoreProducts:function(){return function(){var e=Object(O.a)(y.a.mark((function e(t,a){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=a()).products.loading&&!n.products.infiniteLoading&&n.products.hasMoreProducts){e.next=3;break}return e.abrupt("return");case 3:n.products.loading||n.products.infiniteLoading||!n.products.hasMoreProducts||t(xe(n.products.currentPage+1));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setProductCategoryFilter:Pe})(Ke),He=a(130),We=a(490),Ge=He.a.Option,Qe={labelCol:{span:4},wrapperCol:{span:16}},Ye={wrapperCol:{offset:8,span:16}},Je=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).handleImageUpload=function(e){return new Promise((function(t,a){try{var r=n.props.products.imageUploadResource,o=r.fields,c=new FormData;Object.keys(o).forEach((function(e){c.append(e,o[e])})),c.append("Content-Type",e.type),c.append("file",e);var i={method:"POST",headers:new Headers({Accept:"application/xml"}),body:c};fetch(r.url,i).then((function(e){return e.text()})).then((function(a){var n="".concat(o.key.replace("${filename}",e.name)),c="".concat(r.url).concat(n);return t({imageKey:n,imageUrl:c,fileName:e.name})})).catch((function(e){return console.error(e)}))}catch(s){return a(s)}}))},n.onThumbnailRemove=function(){n.setState({thumbnail:null})},n._isFileValid=function(e){return"image/jpeg"===e.type||"image/png"===e.type?!!(e.size/1024/1024<2)||(he.a.error("Image must smaller than 2MB!"),!1):(he.a.error("You can only upload JPG/PNG file!"),!1)},n.uploadThumbnail=function(){var e=Object(O.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n._isFileValid(t)){e.next=6;break}return e.next=4,n.handleImageUpload(t);case 4:a=e.sent,n.setState({thumbnail:a.imageKey});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.beforeUploadThumbnail=function(e){return n.uploadThumbnail(e),!1},n.beforeUploadProductImage=function(e){return!!n._isFileValid(e)||Promise.reject()},n.onProductImageProgressUpdate=function(e){e.file;var t=e.fileList;e.event;n.setState({uploadedImages:t})},n.productImageUploadCustomRequest=function(){var e=Object(O.a)(y.a.mark((function e(t){var a,r,o,c,i,s,l,u,d,p,m,h;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.onSuccess,r=t.onError,o=t.file,c=t.onProgress,i=n.props.products.imageUploadResource,s=i.fields,l=new FormData,Object.keys(s).forEach((function(e){l.append(e,s[e])})),l.append("Content-Type",o.type),l.append("file",o),u={headers:{"content-type":"multipart/form-data"},onUploadProgress:function(e){var t=Math.floor(e.loaded/e.total*100);c({percent:t})}},e.prev=8,e.next=11,k.a.post(i.url,l,u);case 11:e.sent,d="".concat(s.key.replace("${filename}",o.name)),p="".concat(i.url).concat(d),m=o.name,n.productImageKeys.push(o.name),n.productImages.push({imageKey:d,imageUrl:p,fileName:m}),a("Ok"),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(8),console.log("error: ",e.t0),h=new Error("File upload failed!"),r({err:h});case 25:case"end":return e.stop()}}),e,null,[[8,20]])})));return function(t){return e.apply(this,arguments)}}(),n.onProductImageRemove=function(e){n.productImageKeys=n.productImageKeys.filter((function(t){return t!==e.name})),n.productImages=n.productImages.filter((function(t){return t.fileName!==e.name}))},n.onFinish=function(e){n.setState({submitting:!0}),n.props.createProduct(Object(pe.a)(Object(pe.a)({},e),{},{thumbnail:void 0,product_images:n.productImages,thumbnail_key:n.state.thumbnail}))},n.onFinishFailed=function(e){console.log("Failed:",e)},n.productImageKeys=[],n.productImages=[],n.state={thumbnail:null,submitting:!1,uploadedImages:[]},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchProducts(),this.props.createImageUploadPostResource()}},{key:"render",value:function(){var e=this.state.uploadedImages.every((function(e){return 100===e.percent}));if(!this.props.user||!this.props.user.loggedIn)return r.a.createElement("h1",null,"Loading...");if(-1===this.props.user.userDetails.roles.indexOf("admin"))return r.a.createElement("h1",null,"Access Denied");var t=[];return this.props.products.categories.map((function(e){t.push(r.a.createElement(Ge,{key:e.name},e.name))})),r.a.createElement("div",{className:"createProductContainer"},r.a.createElement("h1",null,"Create Product"),r.a.createElement(ne.a,Object.assign({},Qe,{name:"basic",initialValues:{remember:!0},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed}),r.a.createElement(ne.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter the Product name"}]},r.a.createElement(re.a,null)),r.a.createElement(ne.a.Item,{label:"Highlight",name:"highlight",rules:[{required:!0,message:"Please enter the Product highlight"}]},r.a.createElement(re.a,null)),r.a.createElement(ne.a.Item,{label:"Link",name:"link",rules:[{required:!0,message:"Please enter the Product link"}]},r.a.createElement(re.a,null)),r.a.createElement(ne.a.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Please enter the Product description"}]},r.a.createElement(re.a.TextArea,null)),r.a.createElement(ne.a.Item,{label:"Categories",name:"categories"},r.a.createElement(He.a,{mode:"multiple",style:{width:"100%"},placeholder:"Select Product Categories"},t)),r.a.createElement("h4",null,"Recommended Size: 240x240px"),r.a.createElement(ne.a.Item,{label:"Thumbnail",name:"thumbnail",rules:[{required:!0,message:"Please upload a thumbnail"}]},r.a.createElement(We.a,{beforeUpload:this.beforeUploadThumbnail,onRemove:this.onThumbnailRemove},r.a.createElement(f.a,null,"Click to Upload"))),r.a.createElement("h4",null,"Recommended Size: 1270x760px"),r.a.createElement(ne.a.Item,{label:"Product Images",name:"product_images",rules:[{required:!0,message:"Please upload product images"}],validator:function(e,t,a){console.log(e,t,a)}},r.a.createElement(We.a,{beforeUpload:this.beforeUploadProductImage,onRemove:this.onProductImageRemove,multiple:!0,customRequest:this.productImageUploadCustomRequest,onChange:this.onProductImageProgressUpdate,listType:"picture-card",accept:"image/*",defaultFileList:this.state.uploadedImages},r.a.createElement(f.a,null,"Click to Upload"))),r.a.createElement(ne.a.Item,Ye,r.a.createElement(f.a,{type:"primary",htmlType:"submit",loading:this.state.submitting,disabled:this.state.submitting||!this.state.thumbnail||0===this.state.uploadedImages.length||!e},"Create"))))}}]),a}(r.a.Component),Xe=Object(b.b)((function(e){return{products:e.products,user:e.user}}),{createProduct:function(e){return function(){var t=Object(O.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.post(I+"/api/products",e);case 3:t.sent,he.a.success("New Product Created!"),u.replace("/products"),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},fetchProducts:xe,createImageUploadPostResource:function(){return function(){var e=Object(O.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.post(I+"/api/product-images-upload-request");case 3:a=e.sent,t(ye(a.data.request)),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})(Je),$e=(a(485),a(486),a(498)),Ze=a(488),et=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props.product;return a.thumbnail_key&&(e="".concat(qe,"/").concat(a.thumbnail_key,"?w=60&h=60&fit=crop")),r.a.createElement("div",{className:"relatedProductItem",onClick:function(){return t.props.history.push("/products/".concat(a.id))}},e?r.a.createElement("img",{src:e}):r.a.createElement("div",{className:"imgPlaceholder"},"\xa0"),r.a.createElement("div",{className:"relatedProductTextContainer"},r.a.createElement("h2",null,a.name),r.a.createElement("p",null,a.highlight)))}}]),a}(r.a.Component),tt=Object(s.f)(et),at=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"loginRequiredContainer"},r.a.createElement("h2",null,this.props.heading||"Sign up to Upvote"),r.a.createElement("p",null,"Join our community to upvote, participate in discussions, and stay up to date with the latest in Crypto"),r.a.createElement("div",{id:"loginRequiredButtonsContainer"},r.a.createElement(f.a,{onClick:function(){e.props.showLoginRequiredModal(!1),e.props.showLoginModal(!0)},type:"primary"},"Log In"),r.a.createElement(f.a,{onClick:function(){e.props.showLoginRequiredModal(!1),e.props.showRegisterModal(!0)},type:"primary"},"Register")))}}]),a}(r.a.Component),nt=Object(b.b)((function(e){return{}}),{showLoginModal:U,showRegisterModal:D,showLoginRequiredModal:N})(Object(s.f)(at)),rt=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(ae.a,{visible:this.props.user.loginRequiredModalOpen,footer:null,onCancel:function(){return e.props.showLoginRequiredModal(!1)}},r.a.createElement(nt,null))}}]),a}(r.a.Component),ot=Object(b.b)((function(e){return{user:e.user}}),{showLoginRequiredModal:N})(Object(s.f)(rt)),ct=re.a.TextArea,it=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onCloseModal=function(){window.history.state?n.props.history.goBack():n.props.history.push("/products")},n.state={commentText:"",prevPath:""},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchProductDetails(parseInt(this.props.match.params.id))}},{key:"componentWillReceiveProps",value:function(e,t){this.props.match.params.id!==e.match.params.id&&this.props.fetchProductDetails(parseInt(e.match.params.id))}},{key:"render",value:function(){var e=this,t=parseInt(this.props.match.params.id),a=this.props.products.find((function(e){return e.id===t})),n=a&&a.thumbnail_key,o=a?Object(Se.a)(new Date(a.created_at),{addSuffix:!0}):"",c=a?Object(Fe.a)(new Date(a.created_at),"EEEE, LLLL do yyyy, h:mm a"):"",i="https://firebasestorage.googleapis.com/v0/b/devangel-dev.appspot.com/o/download%20(14).png?alt=media&token=fa7aeea2-0ef7-4189-b32d-58d066b85174";n&&(i="".concat(qe,"/").concat(n,"?w=80&h=80&fit=crop"));var s=a&&a.link;return a&&0!==s.indexOf("http")&&(s="http://"+a.link),r.a.createElement("div",{className:"productDetailsModal"},r.a.createElement(ae.a,{visible:this.props.visible,footer:[],className:"productDetailsModal",onCancel:this.onCloseModal},a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"productDetailsHeader"},r.a.createElement("div",{className:"productDetailsHeaderLeft"},r.a.createElement("img",{src:i}),r.a.createElement("div",{className:"productNameContainer"},r.a.createElement("h2",{className:"productDetailsName"},a.name),r.a.createElement("h4",{className:"productDetailsDescription"},a.description||a.highlight),r.a.createElement("div",{className:"productDetailsTagsContainer"},a.categories.map((function(e){return r.a.createElement(V.a,{key:e.id},e.name)}))))),r.a.createElement("div",{className:"productDetailsHeaderRight"},r.a.createElement("a",{href:s,target:"_blank"},r.a.createElement("span",null,r.a.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd"},r.a.createElement("path",{d:"M14.851 11.923c-.179-.641-.521-1.246-1.025-1.749-1.562-1.562-4.095-1.563-5.657 0l-4.998 4.998c-1.562 1.563-1.563 4.095 0 5.657 1.562 1.563 4.096 1.561 5.656 0l3.842-3.841.333.009c.404 0 .802-.04 1.189-.117l-4.657 4.656c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-1.952-1.951-1.952-5.12 0-7.071l4.998-4.998c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464.493.493.861 1.063 1.105 1.672l-.787.784zm-5.703.147c.178.643.521 1.25 1.026 1.756 1.562 1.563 4.096 1.561 5.656 0l4.999-4.998c1.563-1.562 1.563-4.095 0-5.657-1.562-1.562-4.095-1.563-5.657 0l-3.841 3.841-.333-.009c-.404 0-.802.04-1.189.117l4.656-4.656c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464 1.951 1.951 1.951 5.119 0 7.071l-4.999 4.998c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-.494-.495-.863-1.067-1.107-1.678l.788-.785z"}))),r.a.createElement("span",null,"Open Website")))),r.a.createElement("div",{id:"productDetailsBodyContainer"},r.a.createElement("div",{className:"productDetailsBody"},a.images&&a.images.length>0&&r.a.createElement("div",{className:"productDetailsImagesContainer"},a.images&&a.images.map((function(e){return r.a.createElement("img",{src:"".concat(qe,"/").concat(e.imageKey,"?h=380&fit=crop")})}))),r.a.createElement("div",{className:"productDetailsDateContainer"},r.a.createElement("span",null,"Featured"," ",r.a.createElement("time",{dateTime:a.created_at,title:c},o))),r.a.createElement("div",{className:"productDetailsCommentsContainer"},!this.props.user.loading&&this.props.user.loggedIn&&r.a.createElement("div",{className:"productDetailsAddCommentContainer"},r.a.createElement(ne.a.Item,null,r.a.createElement(ct,{rows:4,onChange:function(t){return e.setState({commentText:t.target.value})},value:this.state.commentText})),r.a.createElement(ne.a.Item,null,r.a.createElement(f.a,{htmlType:"submit",loading:!1,onClick:function(){e.props.addProductComment(a.id,e.state.commentText),e.setState({commentText:""})},type:"primary"},"Add Comment"))),!this.props.user.loading&&!this.props.user.loggedIn&&r.a.createElement("div",{className:"productDetailsCommentLoginRequiredContainer"},r.a.createElement(nt,{heading:"Sign up to Comment"})),r.a.createElement("div",null,r.a.createElement($e.b,{className:"comment-list",header:"".concat(a.comments.length," comments"),itemLayout:"horizontal",dataSource:a.comments,renderItem:function(e){var t="https://ui-avatars.com/api/?name=".concat(e.user.username),a=Object(Se.a)(new Date(e.created_at),{addSuffix:!0});return r.a.createElement("li",null,r.a.createElement(Ze.a,{actions:e.actions,author:e.user.username,avatar:t,content:e.text,datetime:a}))}})))),r.a.createElement("div",{id:"relatedProductsContainer"},a&&a.related_products&&a.related_products.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Related Products"),a.related_products.map((function(e){return r.a.createElement(tt,{product:e})}))))))))}}]),a}(r.a.Component),st=Object(b.b)((function(e){return{products:e.products.products,user:e.user}}),{addProductComment:function(e,t){return function(){var a=Object(O.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,L.post(I+"/api/products/".concat(e,"/comment"),{product_id:e,text:t});case 3:r=a.sent,n(Ee(r.data)),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(0);case 9:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},fetchProductDetails:function(e){return function(){var t=Object(O.a)(y.a.mark((function t(a,n){var r,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function e(t){n().products.initialLoadComplete?(t=Object(pe.a)(Object(pe.a)({},t),{},{updatedAt:(new Date).toISOString()}),a(Ie(t))):setTimeout((function(){return e(t)}),250)},t.prev=1,t.next=4,L.get(I+"/api/products/".concat(e));case 4:o=t.sent,setTimeout((function(){return r(o.data)}),250),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,a){return t.apply(this,arguments)}}()}})(Object(s.f)(it));var lt=function(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),a=(t[0],t[1]),o=Object(b.c)();return Object(n.useEffect)((function(){o(function(){var e=Object(O.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P.a.get("jwt_access_token")){e.next=3;break}return e.abrupt("return");case 3:return t(R()),e.prev=4,e.next=7,L.post(I+"/api/users/profile");case 7:a=e.sent,t(F(a.data)),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()),fetch("/api/time").then((function(e){return e.json()})).then((function(e){a(e.time)}))}),[]),r.a.createElement(s.b,{history:u},r.a.createElement(z,null),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-body"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(ee,null)),r.a.createElement(s.a,{path:["/products","/products/:id"]},r.a.createElement(Ve,null)),r.a.createElement(s.a,{exact:!0,path:"/create-product"},r.a.createElement(Xe,null))),r.a.createElement(s.a,{path:"/products/:id"},r.a.createElement(st,{visible:!0,product:{comments:[]}})),r.a.createElement(ot,null),r.a.createElement(ie,null),r.a.createElement(le,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ut=a(53),dt=Object(ut.c)({grants:J,user:q,products:Le}),pt=Object(w.a)({reducer:dt});c.a.render(r.a.createElement(b.a,{store:pt},r.a.createElement(r.a.StrictMode,null,r.a.createElement(lt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[269,1,2]]]);
//# sourceMappingURL=main.d073b342.chunk.js.map